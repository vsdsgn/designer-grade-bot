
from openai import OpenAI
import os

client = OpenAI(api_key=os.getenv("OPENAI_API_KEY"))

BASE_PROMPT = (
    "Ты — опытный ментор-дизайнер. Твоя задача — определить грейд собеседника (Junior, Middle, Senior, Lead, Director) "
    "на основе диалога из 6–10 вопросов. Каждый вопрос должен раскрывать навыки, мышление и подход кандидата. "
    "Задавай вопросы по одному. Отвечай только вопросом, не добавляй комментариев. Формулируй их просто и понятно."
)

DEFAULT_QUESTIONS = [
    "Расскажи, над каким последним проектом ты работал и какую роль ты в нём выполнял?",
    "Как ты принимаешь дизайнерские решения — на основе чего?",
    "Как ты собираешь и учитываешь обратную связь от команды или заказчика?",
    "С какими сложностями ты сталкивался в проекте и как ты их решал?",
    "Как ты проверяешь, насколько решение действительно эффективно?",
    "Как ты работаешь с разработчиками — были ли конфликты или трудности?",
    "Как ты объясняешь ценность дизайна бизнесу?",
    "Есть ли у тебя опыт наставничества или ведения других дизайнеров?",
    "Как ты подходишь к росту в профессии и чему учишься сейчас?",
    "Как ты организуешь свою работу и оцениваешь результат?"
]

def get_next_question(session):
    idx = len(session.get("answers", []))
    if idx < len(DEFAULT_QUESTIONS):
        return DEFAULT_QUESTIONS[idx]
    return "На этом всё, спасибо за ответы!"
